 <!-- E01. Crea un *ahorcado:
◦ Las palabras para el juego las saquemos de un vector de 8 posiciones de donde se
seleccionará una aleatoriamente para cada una de las partidas.
◦ Las palabras sueño de longitud variable (*max 15)
◦ una letra puede aparecer mes de una vuelta en la palabra.
◦ palabras: mueble, cola, noviembre, puerta, septiembre, cuadro, cuatro,
*hipervincle.
◦ al fallar 7 vueltas el juego acaba y se da la *posibilitat de volver a
*escomençar mostrando la palabra de la *sol·lucio. se muestra en el campo
vidas, las opciones que te quedan
◦ Si existe la letra en alguna *posicio, *escriurela en la casilla
correspondiente y se muestra un mensaje en el campo felicitando al jugador.
si no existe la letra, se resta una vida y se indica el error. -->
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Ahorcado - E04</title>
</head>
<body style="display: flex; align-items:center; flex-direction: column; background-color: aqua;">


    <h1 style="border: 3px solid; padding: 10px;">ahorcado</h1>
<div style="display: flex; flex-direction: row;  align-items: center;">

    <div style="margin-right: 20px;"><img src="ahorcado.webp" alt="ahoracado"></div>
    <div id="juego" style="border: 5px solid; padding: 10px;">
        
        <div id="palabra-container" style="display: flex; justify-content: center; gap: 5px; margin-bottom: 20px;">
            </div>

        <div id="info">
            <p>Vidas restantes: <span id="vidas">7</span></p>
            <p>Mensajes: <span id="mensajes">¡Pulsa una tecla para empezar!</span></p>
            <p>Letras usadas: <span id="letras-usadas">Ninguna</span></p>
            <button id="reinicio" onclick="iniciarJuego()" style="margin-top: 10px;">Volver a Empezar</button>
        </div>
        
    </div>
</div>
    

    <script>
        const palabras = ["moble", "cua", "novembre", "porta", "setembre", "quadre", "quatre", "hipervincle"];
        let palabraSecreta = "";
        let palabraMostrada = [];
        let vidas = 7;
        let letrasUsadas = []; 
        let juegoTerminado = false;

      
        const palabraContainer = document.getElementById("palabra-container");
        const vidasSpan = document.getElementById("vidas");
        const mensajesSpan = document.getElementById("mensajes");
        const reinicioBtn = document.getElementById("reinicio");
        const letrasUsadasSpan = document.getElementById("letras-usadas");

        function iniciarJuego() {
            vidas = 7;
            palabraMostrada = [];
            letrasUsadas = []; 
            juegoTerminado = false;

            const indiceAleatorio = Math.floor(Math.random() * palabras.length);
            palabraSecreta = palabras[indiceAleatorio];

            for (let i = 0; i < palabraSecreta.length; i++) {
                palabraMostrada.push("_");
            }

            actualizarPantalla();
            mensajesSpan.textContent = "Pulsa una letra para adivinar";
            letrasUsadasSpan.textContent = "Ninguna";
        }

        function actualizarPantalla() {
            palabraContainer.innerHTML = "";
            
            palabraMostrada.forEach(letra => {
                const letraBox = document.createElement("div");
                letraBox.style.width = "70px";
                letraBox.style.height = "30px";
                letraBox.style.border = "1px solid black";
                letraBox.style.display = "flex";
                letraBox.style.justifyContent = "center";
                letraBox.style.alignItems = "center";
                letraBox.style.fontSize = "24px";
                letraBox.style.fontWeight = "bold";
                letraBox.textContent = letra;
                palabraContainer.appendChild(letraBox);
            });

            vidasSpan.textContent = vidas;
            if (letrasUsadas.length > 0) {
                letrasUsadasSpan.textContent = letrasUsadas.join(', ');
            } else {
                letrasUsadasSpan.textContent = "Ninguna";
            }
        }

        window.addEventListener('keydown', function(event) {
            if (juegoTerminado) {
                return;
            }

            const letraPulsada = event.key.toLowerCase();

            if (letraPulsada.length === 1 && letraPulsada >= 'a' && letraPulsada <= 'z') {
                procesarLetra(letraPulsada);
            }
        });

        function procesarLetra(letra) {
            if (letrasUsadas.includes(letra)) {
                mensajesSpan.textContent = `Ya has usado la letra '${letra}'. ¡Pierdes una vida!`;
                vidas--;
                actualizarPantalla();
                comprobarFinDeJuego();
                return;
            }
            letrasUsadas.push(letra);
            let acierto = false;
            for (let i = 0; i < palabraSecreta.length; i++) {
                if (palabraSecreta[i] === letra) {
                    palabraMostrada[i] = letra;
                    acierto = true;
                }
            }

            if (acierto) {
                mensajesSpan.textContent = "¡Bien hecho! Has acertado.";
            } else {
                vidas--;
                mensajesSpan.textContent = `La letra '${letra}' no está. Te quedan ${vidas} vidas.`;
            }

            actualizarPantalla();
            comprobarFinDeJuego();
        }

        function comprobarFinDeJuego() {
            if (!palabraMostrada.includes("_")) {
                mensajesSpan.textContent = "¡FELICIDADES, HAS GANADO!";
                juegoTerminado = true;
            } else if (vidas <= 0) {
                mensajesSpan.textContent = `Has perdido. La palabra era: ${palabraSecreta}`;
                juegoTerminado = true;
            }
        }

        iniciarJuego();
    </script>

</body>
</html>